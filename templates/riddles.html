{% extends "base.html" %}
{% block content %}
<section class="panel riddles">
  <h2>Riddle of the Day</h2>
  <div class="riddle-card">
    <div id="rq" class="q"></div>
    <div id="ra" class="a"></div>
  </div>
  <div class="riddle-actions">
    <button id="reveal">Reveal Answer</button>
    <button id="next">Next Riddle</button>
  </div>
</section>

<script>
  (function(){
    const items = {{ items|tojson }};
    let i = 0, shown = false;
    const rq = document.getElementById('rq');
    const ra = document.getElementById('ra');
    function load(idx){ rq.textContent = items[idx][0]; ra.textContent = ""; shown=false; }
    document.getElementById('reveal').onclick = function(){ if(!shown){ ra.textContent = items[i][1]; shown = true; } };
    document.getElementById('next').onclick = function(){ i = (i+1) % items.length; load(i); };
    load(new Date().getDate() % items.length);
  })();
</script>
{% endblock %}
