{% extends "base.html" %}
{% block content %}
  <h2>🌤️ Weather — {{ DATA.weather.location }}</h2>

  <div class="weather-box">
    <div class="row">
      <div class="kv"><span>High</span><strong>{{ DATA.weather.hi_f }}°F</strong></div>
      <div class="kv"><span>Low</span><strong>{{ DATA.weather.lo_f }}°F</strong></div>
      <div class="kv"><span>Wind</span><strong id="wind">{{ DATA.weather.wind_mph }}</strong><strong> mph</strong></div>
    </div>

    <div class="lights">
      <div class="light" id="light-yellow" title="Yellow &gt;= 25 mph"></div>
      <div class="light" id="light-red" title="Red &gt;= 40 mph or warnings"></div>
    </div>

    <form method="post" class="edit-box">
      <input name="location" placeholder="Location" value="{{ DATA.weather.location }}" />
      <input name="hi_f" type="number" placeholder="Hi °F" value="{{ DATA.weather.hi_f }}" />
      <input name="lo_f" type="number" placeholder="Lo °F" value="{{ DATA.weather.lo_f }}" />
      <input name="wind_mph" type="number" placeholder="Wind mph" value="{{ DATA.weather.wind_mph }}" />
      <label class="chk">
        <input type="checkbox" name="warnings" {% if DATA.weather.warnings %}checked{% endif %}>
        Warnings present
      </label>
      <button type="submit">Update</button>
    </form>
  </div>

  <script>
    (function(){
      const wind = parseInt(document.getElementById('wind').textContent || "0", 10);
      const warn = {{ 'true' if DATA.weather.warnings else 'false' }};
      const yellow = document.getElementById('light-yellow');
      const red = document.getElementById('light-red');

      if (wind >= 25) yellow.classList.add('on');
      if (wind >= 40 || warn) red.classList.add('on');
    })();
  </script>
{% endblock %}
